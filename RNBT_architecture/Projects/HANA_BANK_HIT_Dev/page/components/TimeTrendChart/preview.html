<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TimeTrendChart - Preview</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css">
    <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #0a1612;
            padding: 20px;
            font-family: 'Pretendard', sans-serif;
        }

        /* Container: Figma 선택 요소 크기 (831 × 350) */
        #component-container {
            width: 831px;
            height: 350px;
            overflow: auto;
        }

        /* Component Styles (from component.css) */
        #component-container {
            & .time-trend-chart {
                width: 100%;
                height: 100%;
                box-sizing: border-box;
                display: flex;
                flex-direction: column;
                justify-content: space-between;
                align-items: flex-start;
                padding: 14px 24px;
                border-radius: 15px;
                border: 1px solid #4d634e;
                background: linear-gradient(180deg, rgba(32, 44, 40, 0.8) 0%, rgba(8, 33, 25, 0.8) 100%);
                backdrop-filter: blur(2px);
                font-family: 'Pretendard', sans-serif;
            }

            & .header {
                display: flex;
                align-items: center;
                justify-content: space-between;
                width: 100%;
                height: 38px;
                flex-shrink: 0;
            }

            & .title {
                display: flex;
                align-items: center;
                gap: 9px;
            }

            & .title-icon {
                width: 16.681px;
                height: 18.27px;
            }

            & .title-text {
                font-size: 18px;
                font-weight: 600;
                color: #e9ebeb;
                white-space: nowrap;
            }

            & .action-buttons {
                display: flex;
                align-items: center;
                gap: 4px;
            }

            & .btn {
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 4px 16px;
                border-radius: 6px;
                font-size: 15px;
                font-weight: 600;
                white-space: nowrap;
                cursor: pointer;
                transition: all 0.2s;
            }

            & .btn-active {
                background: #172d27;
                border: 0.75px solid #86afa1;
                color: #86afa1;
            }

            & .btn-inactive {
                background: #30403b;
                border: none;
                color: #a5b0ad;
            }

            & .btn-inactive:hover {
                background: #3a4d47;
            }

            & .container {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                gap: 15px;
                flex-grow: 1;
                width: 100%;
                min-height: 1px;
                min-width: 1px;
            }

            & .contents {
                display: flex;
                flex-direction: column;
                gap: 3px;
                width: 100%;
                flex: 1;
            }

            & .date-row {
                display: flex;
                align-items: center;
                justify-content: flex-end;
                gap: 4px;
                width: 100%;
            }

            & .date-box {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 6px;
                padding: 4px 16px;
                background: #2a3d39;
                border-radius: 6px;
            }

            & .date-label {
                font-size: 14px;
                font-weight: 500;
                color: #bcc4c2;
                text-align: center;
                white-space: nowrap;
            }

            & .date-value {
                font-size: 14px;
                font-weight: 500;
                color: #e9ebeb;
                text-align: right;
                white-space: nowrap;
            }

            & .chart-area {
                flex: 1;
                width: 100%;
                min-height: 200px;
            }
        }
    </style>
</head>
<body>
    <div id="component-container">
        <div class="time-trend-chart">
            <!-- Header -->
            <div class="header">
                <div class="title">
                    <svg class="title-icon" viewBox="0 0 17 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M15.2225 3.5078L9.77633 0.380364C8.89074 -0.126788 7.79058 -0.126788 6.905 0.380364L1.45803 3.5078C0.558799 4.02409 0 4.99042 0 6.03061V12.2398C0 13.28 0.558799 14.2471 1.45803 14.7634L6.905 17.89C7.34779 18.1436 7.84366 18.27 8.34028 18.27C8.83691 18.27 9.33353 18.1436 9.77633 17.89L15.2233 14.7626C16.1233 14.2463 16.6813 13.28 16.6813 12.2398V6.03137C16.6813 4.99118 16.1233 4.02409 15.2233 3.50856L15.2225 3.5078ZM1.8341 4.16877L7.28107 1.0421C7.93464 0.666684 8.74592 0.668207 9.3995 1.0421L14.8465 4.16801C15.0625 4.29213 15.24 4.46042 15.3969 4.64622L12.3808 6.37785C12.2322 6.20423 12.0646 6.04584 11.8614 5.92857L9.35931 4.48555C8.73 4.12232 7.94905 4.12232 7.32049 4.48555L4.81841 5.92857C4.61521 6.04584 4.4484 6.20423 4.29904 6.37785L1.28289 4.64622C1.43984 4.46118 1.61801 4.29289 1.8341 4.16877ZM12.1313 7.71198V10.5676C12.1313 11.0305 11.8826 11.4623 11.4823 11.6923L8.98021 13.1284C8.89756 13.1764 8.80885 13.2076 8.71939 13.2358V9.35756L12.0927 7.42109C12.1146 7.51628 12.1313 7.61222 12.1313 7.71198ZM4.54924 7.71198C4.54924 7.61222 4.56593 7.51551 4.58791 7.42033L7.96118 9.35679V13.2351C7.87171 13.2076 7.783 13.1757 7.70035 13.1277L5.19903 11.6923C4.79794 11.4615 4.54924 11.0305 4.54924 10.5668V7.71122V7.71198ZM8.34028 8.69658L4.97081 6.7624C5.04056 6.69844 5.11259 6.63676 5.19675 6.58878L7.69884 5.14576C7.89673 5.03154 8.11889 4.97443 8.34028 4.97443C8.56168 4.97443 8.78383 5.03078 8.98248 5.14576L11.4846 6.58878C11.568 6.63676 11.6408 6.69844 11.7105 6.7624L8.34104 8.69658H8.34028ZM1.8341 14.1032C1.17067 13.7216 0.758207 13.0081 0.758207 12.2406V6.03137C0.758207 5.7778 0.817348 5.5364 0.901509 5.30491L3.91917 7.0373C3.84335 7.25356 3.79028 7.47744 3.79028 7.71274V10.5683C3.79028 11.3039 4.18531 11.9877 4.82144 12.3548L7.32353 13.7909C7.52293 13.9052 7.73978 13.9699 7.96042 14.011V17.4621C7.72462 17.4194 7.49336 17.3524 7.28031 17.2298L1.83335 14.1039L1.8341 14.1032ZM15.9224 12.2406C15.9224 13.0081 15.5099 13.7216 14.8465 14.1032L9.3995 17.2291C9.18644 17.3517 8.95519 17.4187 8.71939 17.4613V14.0103C8.94002 13.9684 9.15687 13.9044 9.35628 13.7902L11.8584 12.3533C12.4945 11.9877 12.8895 11.3032 12.8895 10.5676V7.71198C12.8895 7.47668 12.8365 7.2528 12.7606 7.03654L15.7791 5.30415C15.8632 5.53564 15.9224 5.77703 15.9224 6.03061V12.2406Z" fill="#E9EBEB"/>
                    </svg>
                    <span class="title-text">시간대별 거래추이</span>
                </div>
                <div class="action-buttons">
                    <div class="btn btn-active" data-filter="전체">전체</div>
                    <div class="btn btn-inactive" data-filter="상품">상품</div>
                    <div class="btn btn-inactive" data-filter="1Q">1Q</div>
                </div>
            </div>

            <!-- Container -->
            <div class="container">
                <div class="contents">
                    <!-- Date Row -->
                    <div class="date-row">
                        <div class="date-box">
                            <span class="date-label">PEAK일</span>
                            <span class="date-value" data-peak-date>2025/08/05</span>
                        </div>
                    </div>

                    <!-- ECharts Container -->
                    <div class="chart-area" id="echarts"></div>
                </div>

            </div>
        </div>
    </div>

    <script>
        // ======================
        // Mock Response (Raw API 구조)
        // ======================
        const mockResponse = {
            data: [
                { tm: "00", val_max: 1200, val_year: 1050, val_month: 550, val_prev: 280, val_today: 150 },
                { tm: "02", val_max: 1450, val_year: 1250, val_month: 650, val_prev: 350, val_today: 200 },
                { tm: "04", val_max: 950, val_year: 880, val_month: 500, val_prev: 280, val_today: 180 },
                { tm: "06", val_max: 850, val_year: 780, val_month: 420, val_prev: 220, val_today: 120 },
                { tm: "08", val_max: 900, val_year: 850, val_month: 480, val_prev: 260, val_today: 150 },
                { tm: "10", val_max: 950, val_year: 900, val_month: 550, val_prev: 320, val_today: 200 },
                { tm: "12", val_max: 850, val_year: 800, val_month: 500, val_prev: 300, val_today: 180 },
                { tm: "14", val_max: 620, val_year: 600, val_month: 450, val_prev: 280, val_today: 160 },
                { tm: "16", val_max: 680, val_year: 650, val_month: 500, val_prev: 320, val_today: 220 },
                { tm: "18", val_max: 750, val_year: 700, val_month: 550, val_prev: 380, val_today: 320 },
                { tm: "20", val_max: 680, val_year: 650, val_month: 520, val_prev: 350, val_today: 280 },
                { tm: "22", val_max: 720, val_year: 680, val_month: 580, val_prev: 400, val_today: 350 }
            ]
        };

        // ======================
        // CONFIG (register.js와 동일)
        // ======================
        const config = {
            xKey: 'tm',
            seriesMap: [
                { key: 'val_max', name: '역대픽', color: '#526FE5' },
                { key: 'val_year', name: '연중최고픽', color: '#52BEE5' },
                { key: 'val_month', name: '월픽', color: '#009178' },
                { key: 'val_prev', name: '전일', color: '#52E5C3' },
                { key: 'val_today', name: '금일', color: '#AAFD84' }
            ],
            smooth: true,
            symbol: 'none',
            areaStyle: true,
            areaGradient: true,
            yAxis: { min: 0, max: 1800, interval: 600 }
        };

        // ======================
        // INITIALIZE ECHARTS
        // ======================
        const chartContainer = document.getElementById('echarts');
        const chartInstance = echarts.init(chartContainer);

        // ======================
        // RENDER FUNCTION (register.js와 동일 로직)
        // ======================
        function renderLineData(config, { response }) {
            const { data } = response;
            if (!data || !data[Symbol.iterator]) return;

            const { xKey, seriesMap, smooth, symbol, areaStyle, areaGradient, yAxis } = config;

            const option = {
                backgroundColor: 'transparent',
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'line',
                        lineStyle: { color: 'rgba(255, 255, 255, 0.3)', width: 2 }
                    },
                    backgroundColor: 'rgba(53, 60, 60, 0.8)',
                    borderColor: 'transparent',
                    textStyle: { color: '#fff', fontSize: 14 }
                },
                legend: {
                    show: true,
                    bottom: 0,
                    itemWidth: 8,
                    itemHeight: 8,
                    itemGap: 16,
                    icon: 'circle',
                    textStyle: {
                        color: '#d2d8d6',
                        fontSize: 13,
                        fontWeight: 500,
                        fontFamily: 'Pretendard, sans-serif'
                    }
                },
                grid: { left: 40, right: 10, top: 10, bottom: 40, containLabel: false },
                xAxis: {
                    type: 'category',
                    boundaryGap: false,
                    data: data.map(d => d[xKey]),
                    axisLine: { show: true, lineStyle: { color: 'rgba(255, 255, 255, 0.3)' } },
                    axisTick: { show: false },
                    axisLabel: { color: '#d2d8d6', fontSize: 12 },
                    splitLine: { show: false }
                },
                yAxis: {
                    type: 'value',
                    min: yAxis.min,
                    max: yAxis.max,
                    interval: yAxis.interval,
                    axisLine: { show: false },
                    axisTick: { show: false },
                    axisLabel: { color: '#d2d8d6', fontSize: 12 },
                    splitLine: { show: true, lineStyle: { color: 'rgba(255, 255, 255, 0.2)', type: 'dashed' } }
                },
                series: seriesMap.map(s => ({
                    name: s.name,
                    type: 'line',
                    smooth,
                    symbol,
                    data: data.map(d => d[s.key]),
                    itemStyle: { color: s.color },
                    lineStyle: { color: s.color, width: 2 },
                    areaStyle: areaStyle ? {
                        color: areaGradient ? {
                            type: 'linear',
                            x: 0, y: 0, x2: 0, y2: 1,
                            colorStops: [
                                { offset: 0, color: s.color + '80' },
                                { offset: 1, color: s.color + '10' }
                            ]
                        } : s.color
                    } : undefined
                }))
            };

            chartInstance.setOption(option);
        }

        // ======================
        // RESIZE & RENDER
        // ======================
        window.addEventListener('resize', () => chartInstance.resize());

        renderLineData(config, mockResponse);
    </script>
</body>
</html>
